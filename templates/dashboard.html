<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    
    <style>
      body {
        background-image: url(https://static.vecteezy.com/system/resources/previews/002/538/570/original/abstract-lavender-lilac-background-free-vector.jpg);
      }
      main{
          font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
          margin: 0;
          padding: 30px;
          height: 100px;
      }
      h1{
          font-weight: bold;
          margin: 0;
          padding: 0;
          font-size: 50px;
          text-align: center;
          color: rgb(90, 7, 44);
      }
      h2{
          text-align:left;
          color: #343a40;
      } 
      h3{
          text-align:left;
          color: rgb(0, 0, 0);
      }
      .container2 {
          max-width: 100%; /* Make the container full width */
          margin: 0 auto;
          padding: 75px;
          background-color: rgb(214, 176, 193);
          border-radius: 10px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .btn {
          display: inline-block;
          padding: 10px 15px;
          margin: 10px 0;
          text-decoration: none;
          color: #fff;
          background-color: #007bff;
          border-radius: 5px;
          text-align: center;
      }
      .btn:hover {
          background-color: #0056b3;
      }
      table {
          width: 100%; /* Make the table span the full width */
          border-collapse: collapse;
          margin-top: 20px;
      }
      table th, table td {
          border: 1px solid #dee2e6;
          padding: 10px;
          text-align: center;
      }
      table th {
          background-color: rgb(90, 7, 44);
          color: #fff;
      }
      table tr:nth-child(even) {
          background-color: #f8f9fa;
      }
    .footer {
        text-align: center;
        margin-top: 20px;
        font-size: 14px;
        color: #6c757d;
        display: flex;
        justify-content: center;
        align-items: center;
    }
      .container2 {
          text-align: right;
      }
      .container2 p, .container2 a {
          display: inline-block;
          margin: 0;
          font-size: medium;
      }
      .btn{
        background:#7b4d6a;
      }
      .btn:hover {
    background: rgb(90, 7, 44);
    } 

      .prof-img{
        border-radius: 10%;
        width: 170px; 
        height: 170px;
        object-fit: cover;
        border: 2px solid #7b4d6a;
        margin-right: 30px;
      }
      .ct3 {
        display: flex;
        align-items: flex-start;
        gap: 30px;
        padding: 20px;
        background-color: rgba(227, 174, 199, 0.9);
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .ct3 table {
        width: 60%;
      }
      .ct3 table td {
        padding: 8px;
        font-size: 16px;
      }
      .ct3 table td:first-child {
        font-weight: bold;
        color: rgb(90, 7, 44);
      }
      .ct4 , .ct6 {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        margin-top: 20px;
    }
    .ct{
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        margin-top: 20px;
    }
    .ct p {
        font-size: 18px;
    }
    .cont7{
        text-align: left;
    }

  </style>
</head>
<body>
<main>
        
    <div class="container2">
            <h1>DASHBOARD</h1>
            <h2>Welcome back, {{ user.name }}!</h2>
            
          

            <p>Your balance: <strong>Rs {{ user.balance }}</strong></p><br>
            <a href="{{ url_for('topup') }}" class="btn">Top Up Balance</a>
            <br>

            <br><div style="background-color: rgba(182, 127, 127, 0.9); padding: 5px; border-radius: 8px; margin-bottom: 5px;">
                <div style="display: flex; justify-content: space-between; align-items: center; gap: 0;">
                    <h3 style="margin: 2px;">View All Notifications</h3>
                    <a href="{{ url_for('notification') }}" class="btn" style="margin-left: 2px;">
                        <i class="fas fa-bell"></i> Notifications
                    </a>
                </div>
            </div>

            <h2>Profile</h2>
            <div style="display: flex; align-items: flex-start; justify-content: space-between;">
                    <div class="ct3" style="display: flex; align-items: center; flex: 1;">
                            <img src="{{ url_for('static', filename='images/jj.jpg') }}"  alt="Profile Picture" class="prof-img" style="margin-right: 20px;">
                            <table>
                                    <tr>
                                            <td><strong>USN :</strong></td>
                                            <td>{{ user.usn }}</td>
                                    </tr>
                                    <tr>
                                            <td><strong>Name :</strong></td>
                                            <td>{{user.name}}</td>
                                    </tr>
                                    <tr>
                                            <td><strong>Email :</strong></td>
                                            <td>{{ user.email }}</td>
                                    </tr>
                                    <tr>
                                            <td><strong>Phone No. :</strong></td>
                                            <td>{{ user.phone }}</td>
                                    </tr>
                                    <tr>
                                            <td><strong>Address :</strong></td>
                                            <td>{{ user.address }}</td>
                                    </tr>
                                    <tr>
                                            <td><strong>Bus No. :</strong></td>
                                            <td>{{ user.bus_number }}</td>
                                    </tr>
                            </table>
                    </div>
            </div><br>
            <div class="ct" style="display: flex; justify-content: flex-start;">
                <div style="flex: 1;">
                    <p><strong>Scan the QR on the bus to complete your boarding:</strong></p>
                    <a href="{{ url_for('qr_scan') }}" class="btn">QR Scan</a>
                </div>
            </div><br>
            <h3>Available Buses</h3>
            <div style="background-color: rgb(214, 176, 193); padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: left; max-width: 600px;">
                <p style="margin: 0; color: #495057; font-size: 16px;">
                    <i class="fas fa-info-circle"></i> 
                    <strong>Note:</strong> Bus bookings are currently available only for evening return trips (5:00 PM).
                </p>
            </div>
            <table>
                    <thead>
                            <tr>
                                    <th>Bus Number</th>
                                    <th>Starting Point</th>
                                    <th>Ending Point</th>
                                    <th>Fare</th>
                                    <th>Seats Left</th>
                                    <th>Action</th>
                            </tr>
                    </thead>
                    <tbody>
                            {% for bus in buses %}
                            <tr>
                                    <td>{{ bus.bus_number }}</td>
                                    <td>{{ bus.starting_point }}</td>
                                    <td>{{ bus.ending_point }}</td>
                                    <td>₹{{ bus.fare }}</td>
                                    <td>{{ bus.seats_left }} / {{ bus.total_seats }}</td>
                                    <td>
                                        <a href="{{ url_for('book_bus', bus_id=bus.bus_number) }}" class="btn">Book Now</a>
                                    </td>
                            </tr>
                            {% endfor %}
                    </tbody>
            </table><br>
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                <div class="cont7" style="flex: 2; display: flex; flex-direction: row; align-items: center; gap: 50px;">
                    
                    <h4>To view bus location</h4>
                    <a href="{{ url_for('view_bus_location') }}" class="btn">View Bus Location</a>
                    <h4>To view your transaction history</h4>
                    <a href="{{ url_for('view_transactions') }}" class="btn">View Transactions</a>
                </div>
            </div><br>
          
    <div class="modal-body" style="text-align: left;">
        <h3>Bus Routes:</h3>
        <ul>
            <li><strong>Bus no. 1:</strong> Kundapura to SMVITM College - 30 km</li>
            <li><strong>Bus no. 2:</strong> Udupi to SMVITM College - 8.5 km</li>
            <li><strong>Bus no. 3:</strong> Manipal to SMVITM College - 12 km</li>
            <li><strong>Bus no. 4:</strong> Brahmavar to SMVITM College - 15 km</li>
            <li><strong>Bus no. 5:</strong> Mangalore to SMVITM College - 40 km</li>
        </ul>
    </div><br>

   
    <div class="feedback-section" style="background-color: rgba(227, 174, 199, 0.9); padding: 20px; border-radius: 10px; margin-top: 20px;">
        <h3 style="color: rgb(90, 7, 44);">Provide Feedback</h3>
        <form action="{{ url_for('submit_feedback') }}" method="POST">
            <div style="margin-bottom: 15px;">
                <label for="feedback_type" style="display: block; margin-bottom: 5px; color: #333;">Feedback Type:</label>
                <select name="feedback_type" id="feedback_type" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
                    <option value="service">Service Quality</option>
                    <option value="bus">Bus Condition</option>
                    <option value="driver">Driver Behavior</option>
                    <option value="schedule">Schedule</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label for="rating" style="display: block; margin-bottom: 5px; color: #333;">Rating:</label>
                <select name="rating" id="rating" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
                    <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
                    <option value="4">⭐⭐⭐⭐ Very Good</option>
                    <option value="3">⭐⭐⭐ Good</option>
                    <option value="2">⭐⭐ Fair</option>
                    <option value="1">⭐ Poor</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label for="feedback_text" style="display: block; margin-bottom: 5px; color: #333;">Your Feedback:</label>
                <textarea name="feedback_text" id="feedback_text" rows="4" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd;" required></textarea>
            </div>
            <button type="submit" class="btn" style="background: #7b4d6a; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Submit Feedback</button>
        </form>
    </div>

    <div class="footer">
                    <p>&copy; 2025 Bus Reservation System. All rights reserved.</p>
            </div>
            </div>
    </div>
</main>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>